StayFit DataBase

Консольний застосунок (.NET 8) для наповнення та управління тестовою базою даних PostgreSQL фітнес-додатка. Генерує реалістичні тестові дані (Bogus, українська локалізація) та дозволяє переглядати вміст таблиць у зручному форматі.

Основні можливості

Перегляд даних: вивід до 50 записів з кожної таблиці у форматованому вигляді. Якщо таблиця порожня — виводиться No data found.

Генерація тестових даних: створення 30–50 користувачів, продуктів, щоденникових записів та пов’язаних записів. Усе виконується в рамках однієї транзакції.

Інтерактивне текстове меню (консоль).

Надійне хешування паролів (BCrypt).

Технічні вимоги

.NET 8.0 SDK або новіший

PostgreSQL 12 або новіший

Працює на Windows, macOS, Linux

Файли проекту

Program.cs — головний файл застосунку (з рядком підключення до БД, див. секцію Конфігурація).

schema.sql — SQL-скрипт для створення всіх таблиць та обмежень.

DatabaseConsoleApp.csproj — проектний файл (.NET).

(опціонально) README (цей файл), інструкції.

Установка та швидкий старт

Встановіть .NET 8 SDK
Перевірка:

dotnet --version


Встановіть PostgreSQL (якщо ще не встановлено).

Створіть базу даних:

CREATE DATABASE fitness_db;


Застосуйте схему:

psql -U postgres -d fitness_db -f schema.sql


або виконати schema.sql через pgAdmin.

Налаштуйте проект:

Скопіюйте файли у директорію проекту:

mkdir DatabaseConsoleApp
cd DatabaseConsoleApp
# помістіть Program.cs, DatabaseConsoleApp.csproj, schema.sql сюди


Відредагуйте рядок підключення в Program.cs (рядок з константою ConnectionString — за замовчуванням на початку файлу або рядок 13 у шаблоні):

private const string ConnectionString = "Host=localhost;Port=5432;Database=fitness_db;Username=postgres;Password=your_password";


Замініть your_password та інші параметри на свої.

Відновіть залежності та зберіть проект:

dotnet restore
dotnet build


Запустіть:

dotnet run

Меню та використання

Після запуску з’явиться меню:

================================           Main Menu            ================================
1. Display data from all tables
2. Generate test data
3. Exit
Your choice:


Введіть 1 — переглянути дані (до 50 записів з кожної таблиці).

Введіть 2 — згенерувати тестові дані. Створення відбувається в одній транзакції (щоб уникнути напівзаповнених станів при помилках).

Введіть 3 — вихід із застосунку.

Опцію генерації можна виконувати кілька разів — дані будуть додаватися.

Процес генерації даних

Використовується бібліотека Bogus з українською локаллю для генерації імен, адрес, описів та іншої реалістичної інформації.

Хешування паролів — BCrypt.Net-Next.

Типові обсяги: 30–50 користувачів/продуктів/записів. Час виконання — приблизно 10–30 секунд (залежить від машини та налаштувань БД).

Налаштування та конфігурація

Connection string тримайте в Program.cs (або винесіть у appsettings.json, якщо хочете). Формат:

Host=localhost;Port=5432;Database=fitness_db;Username=postgres;Password=your_password


Якщо хочете запускати кілька разів без дублювання певних сутностей — додайте перевірки у код (наприклад, унікальні індекси або логіку пропуску існуючих записів).

schema.sql (коротко)

schema.sql повинен включати створення таблиць, індексів та обмежень (PK/FK). Прикладні таблиці:

users

products

diary_entries

workouts

product_categories

і т. п.

Переконайтеся, що всі FK та унікальні обмеження відповідають логіці генерації — інакше вставка може завершитися помилкою.

Вирішення поширених проблем
1. Помилки підключення до PostgreSQL

Перевірте, чи запущено сервіс:

Windows: services.msc → PostgreSQL

Linux: sudo systemctl status postgresql

Переконайтеся, що порт 5432 відкритий у брандмауері.

Спробуйте підключитись через psql:

psql -U postgres -d fitness_db

2. Помилки схеми/генерації даних

Причина: порушення constraints (FK, UNIQUE) або невідповідність схеми. Рішення:

psql -U postgres -c "DROP DATABASE IF EXISTS fitness_db;"
psql -U postgres -c "CREATE DATABASE fitness_db;"
psql -U postgres -d fitness_db -f schema.sql


Перевірте деталі помилки у консолі — вони підкажуть, яка саме таблиця/обмеження викликало проблему.

3. Помилки збірки / NuGet

Очистіть кеш NuGet і відновіть пакети:

dotnet nuget locals all --clear
dotnet restore
dotnet build
